{"version":3,"file":"editor-script.js","mappings":"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","sources":["webpack://ud-tagged-links-block/./node_modules/@wordpress/icons/build-module/library/chevron-down.js","webpack://ud-tagged-links-block/./node_modules/@wordpress/icons/build-module/library/chevron-right.js","webpack://ud-tagged-links-block/./src/js/edit.js","webpack://ud-tagged-links-block/./src/js/save.js","webpack://ud-tagged-links-block/external window [\"wp\",\"blockEditor\"]","webpack://ud-tagged-links-block/external window [\"wp\",\"components\"]","webpack://ud-tagged-links-block/external window [\"wp\",\"data\"]","webpack://ud-tagged-links-block/external window [\"wp\",\"element\"]","webpack://ud-tagged-links-block/external window [\"wp\",\"primitives\"]","webpack://ud-tagged-links-block/external window \"ReactJSXRuntime\"","webpack://ud-tagged-links-block/webpack/bootstrap","webpack://ud-tagged-links-block/webpack/runtime/compat get default export","webpack://ud-tagged-links-block/webpack/runtime/define property getters","webpack://ud-tagged-links-block/webpack/runtime/hasOwnProperty shorthand","webpack://ud-tagged-links-block/webpack/runtime/make namespace object","webpack://ud-tagged-links-block/./src/js/editor.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst chevronDown = /*#__PURE__*/_jsx(SVG, {\n  viewBox: \"0 0 24 24\",\n  xmlns: \"http://www.w3.org/2000/svg\",\n  children: /*#__PURE__*/_jsx(Path, {\n    d: \"M17.5 11.6L12 16l-5.5-4.4.9-1.2L12 14l4.5-3.6 1 1.2z\"\n  })\n});\nexport default chevronDown;\n//# sourceMappingURL=chevron-down.js.map","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst chevronRight = /*#__PURE__*/_jsx(SVG, {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  children: /*#__PURE__*/_jsx(Path, {\n    d: \"M10.6 6L9.4 7l4.6 5-4.6 5 1.2 1 5.4-6z\"\n  })\n});\nexport default chevronRight;\n//# sourceMappingURL=chevron-right.js.map","import { useEffect, useState } from \"@wordpress/element\";\nimport { useSelect } from \"@wordpress/data\";\nimport {\n\tTextControl,\n\tFormTokenField,\n\tSelectControl,\n\tSpinner,\n\tButton,\n} from \"@wordpress/components\";\n\nimport { chevronDown, chevronRight } from \"@wordpress/icons\";\nimport { useBlockProps } from \"@wordpress/block-editor\";\n\nconst REST_NONCE = window.udTagLinkSettings?.nonce || \"\";\n\nexport default function Edit({ attributes, setAttributes }) {\n\tconst { selectedPageId, selectedTags } = attributes;\n\tconst blockProps = useBlockProps();\n\tconst [showOptions, setShowOptions] = useState(false);\n\n\t// Globale Tags von REST laden\n\tconst [globalTags, setGlobalTags] = useState([]);\n\n\tuseEffect(() => {\n\t\tfetch(\"/wp-json/ud-shared/v1/tags\", {\n\t\t\theaders: {\n\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t},\n\t\t\tcredentials: \"same-origin\", // ✅ das ist entscheidend\n\t\t})\n\t\t\t.then((res) => res.json())\n\t\t\t.then((tags) => {\n\t\t\t\tif (Array.isArray(tags)) {\n\t\t\t\t\tsetGlobalTags(tags);\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\tconsole.warn(\"Fehler beim Laden der Tags:\", error);\n\t\t\t\tsetGlobalTags([]);\n\t\t\t});\n\t}, []);\n\n\t// Alle Seiten laden (Page/Post)\n\tconst pages = useSelect((select) =>\n\t\tselect(\"core\").getEntityRecords(\"postType\", \"page\", {\n\t\t\tper_page: -1,\n\t\t\tstatus: [\"publish\", \"private\"], // ← wichtig\n\t\t}),\n\t);\n\n\treturn (\n\t\t<div {...blockProps}>\n\n\t\t\t<div className=\"tagged-links-block__row tagged-links-block__row--options-toggle\">\n\t\t\t<h2 className=\"tagged-links-block__title\">Automatische Links</h2>\n\t\t\t\t<Button\n\t\t\t\t\tvariant=\"tertiary\"\n\t\t\t\t\tsize=\"small\"\n\t\t\t\t\ticon={showOptions ? chevronDown : chevronRight}\n\t\t\t\t\tonClick={() => setShowOptions((v) => !v)}\n\t\t\t\t>\n\t\t\t\t\t{showOptions ? \"Details\" : \"Details\"}\n\t\t\t\t</Button>\n\t\t\t</div>\n\n\t\t\t{showOptions && (\n\t\t\t\t<>\n\t\t\t\t\t<div className=\"tagged-links-block__field field__page\">\n\t\t\t\t\t\t<label className=\"tagged-links-block__label\">\n\t\t\t\t\t\t\tSeite mit den Link-Blocks auswählen\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t{!pages ? (\n\t\t\t\t\t\t\t<Spinner />\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<SelectControl\n\t\t\t\t\t\t\t\tvalue={selectedPageId || \"\"}\n\t\t\t\t\t\t\t\toptions={[\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tlabel: \"— Seite mit den Link-Blocks auswählen —\",\n\t\t\t\t\t\t\t\t\t\tvalue: \"\",\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t...pages.map((page) => ({\n\t\t\t\t\t\t\t\t\t\tlabel:\n\t\t\t\t\t\t\t\t\t\t\tpage.title.rendered ||\n\t\t\t\t\t\t\t\t\t\t\t`(ID ${page.id})`,\n\t\t\t\t\t\t\t\t\t\tvalue: page.id,\n\t\t\t\t\t\t\t\t\t})),\n\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\tonChange={(val) =>\n\t\t\t\t\t\t\t\t\tsetAttributes({\n\t\t\t\t\t\t\t\t\t\tselectedPageId:\n\t\t\t\t\t\t\t\t\t\t\tparseInt(val, 10) || null,\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t__next40pxDefaultSize={true}\n\t\t\t\t\t\t\t\t__nextHasNoMarginBottom={true}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className=\"tagged-links-block__field field__tags\">\n\t\t\t\t\t\t<label className=\"tagged-links-block__label\">\n\t\t\t\t\t\t\tLinks mit folgenden Tags ausgeben\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<FormTokenField\n\t\t\t\t\t\t\tsuggestions={globalTags}\n\t\t\t\t\t\t\tvalue={selectedTags || []}\n\t\t\t\t\t\t\tonFocus={() => {\n\t\t\t\t\t\t\t\tfetch(\"/wp-json/ud-shared/v1/tags\", {\n\t\t\t\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tcredentials: \"same-origin\",\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t.then((res) => res.json())\n\t\t\t\t\t\t\t\t\t.then((tags) => {\n\t\t\t\t\t\t\t\t\t\tif (Array.isArray(tags)) {\n\t\t\t\t\t\t\t\t\t\t\tsetGlobalTags(tags);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t.catch((err) =>\n\t\t\t\t\t\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\t\t\t\t\t\t\"❌ Fehler beim Nachladen der Tags:\",\n\t\t\t\t\t\t\t\t\t\t\terr,\n\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tonChange={(tags) =>\n\t\t\t\t\t\t\t\tsetAttributes({ selectedTags: tags })\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t__next40pxDefaultSize={true}\n\t\t\t\t\t\t\t__nextHasNoMarginBottom={true}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n","export default function save() {\n\treturn null;\n}\n","module.exports = window[\"wp\"][\"blockEditor\"];","module.exports = window[\"wp\"][\"components\"];","module.exports = window[\"wp\"][\"data\"];","module.exports = window[\"wp\"][\"element\"];","module.exports = window[\"wp\"][\"primitives\"];","module.exports = window[\"ReactJSXRuntime\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\n * editor.js\n *\n * JavaScript für den Block-Editor (Gutenberg).\n * Wird ausschließlich im Backend geladen.\n *\n * Hinweis:\n * Diese Datei enthält editor-spezifische Interaktionen oder React-Komponenten.\n * Wird über webpack zu editor.js gebündelt und in block.json oder enqueue.php eingebunden.\n */\n\nimport edit from './edit';\nimport save from './save';\nimport metadata from '../../block.json';\n\nwp.blocks.registerBlockType(metadata.name, {\n    ...metadata,\n    edit,\n    save,\n});\n"],"names":["useEffect","useState","useSelect","TextControl","FormTokenField","SelectControl","Spinner","Button","chevronDown","chevronRight","useBlockProps","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","REST_NONCE","window","udTagLinkSettings","nonce","Edit","attributes","setAttributes","selectedPageId","selectedTags","blockProps","showOptions","setShowOptions","globalTags","setGlobalTags","fetch","headers","credentials","then","res","json","tags","Array","isArray","catch","error","console","warn","pages","select","getEntityRecords","per_page","status","children","className","variant","size","icon","onClick","v","value","options","label","map","page","title","rendered","id","onChange","val","parseInt","__next40pxDefaultSize","__nextHasNoMarginBottom","suggestions","onFocus","err","save","edit","metadata","wp","blocks","registerBlockType","name"],"sourceRoot":""}